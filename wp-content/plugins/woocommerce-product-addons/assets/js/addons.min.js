jQuery(document).ready(function(a){a.fn.init_addon_totals=function(){a(this).on("keyup change",".product-addon input, .product-addon textarea",function(){if(a(this).attr("maxlength")>0){var b=a(this).val(),c=a(this).attr("maxlength")-b.length;a(this).next(".chars_remaining").find("span").text(c)}}),a(this).find(" .addon-custom, .addon-custom-textarea").each(function(){a(this).attr("maxlength")>0&&a(this).after('<small class="chars_remaining"><span>'+a(this).attr("maxlength")+"</span> "+woocommerce_addons_params.i18n_remaining+"</small>")}),a(this).on("change",".product-addon input, .product-addon textarea, .product-addon select, input.qty",function(){a(this).trigger("woocommerce-product-addons-update")}),a(this).on("found_variation",function(b,c){var d=a(this),e=d.find("#product-addons-total");a(c.price_html).find(".amount:last").size()&&(product_price=a(c.price_html).find(".amount:last").text(),product_price=product_price.replace(woocommerce_addons_params.currency_format_symbol,""),product_price=product_price.replace(woocommerce_addons_params.currency_format_thousand_sep,""),product_price=product_price.replace(woocommerce_addons_params.currency_format_decimal_sep,"."),product_price=product_price.replace(/[^0-9\.]/g,""),product_price=parseFloat(product_price),e.data("price",product_price)),d.trigger("woocommerce-product-addons-update")}),a(this).on("woocommerce-product-addons-update",function(){var b=0,c=a(this),d=c.find("#product-addons-total"),e=d.data("price"),f=d.data("type");if(("variable"==f||"variable-subscription"==f)&&c.find(".single_variation").after(d),c.find(".addon").each(function(){var c=0;a(this).is(".addon-custom-price")?c=a(this).val():a(this).is(".addon-input_multiplier")?(isNaN(a(this).val())||""==a(this).val()?(a(this).val(""),a(this).closest("p").find(".addon-alert").show()):(""!=a(this).val()&&a(this).val(Math.ceil(a(this).val())),a(this).closest("p").find(".addon-alert").hide()),c=a(this).data("price")*a(this).val()):a(this).is(".addon-checkbox, .addon-radio")?a(this).is(":checked")&&(c=a(this).data("price")):a(this).is(".addon-select")?a(this).val()&&(c=a(this).find("option:selected").data("price")):a(this).val()&&(c=a(this).data("price")),c||(c=0),b=parseFloat(b)+parseFloat(c)}),c.find("input.qty").size())var g=parseFloat(c.find("input.qty").val());else var g=1;if(b>0&&g>0){b=parseFloat(b*g);var h=accounting.formatMoney(b,{symbol:woocommerce_addons_params.currency_format_symbol,decimal:woocommerce_addons_params.currency_format_decimal_sep,thousand:woocommerce_addons_params.currency_format_thousand_sep,precision:woocommerce_addons_params.currency_format_num_decimals,format:woocommerce_addons_params.currency_format});if(e){product_total_price=parseFloat(e*g);var i=accounting.formatMoney(product_total_price+b,{symbol:woocommerce_addons_params.currency_format_symbol,decimal:woocommerce_addons_params.currency_format_decimal_sep,thousand:woocommerce_addons_params.currency_format_thousand_sep,precision:woocommerce_addons_params.currency_format_num_decimals,format:woocommerce_addons_params.currency_format})}if(a(".single_variation_wrap .subscription-details").length){var j=a(".single_variation_wrap .subscription-details").clone().wrap("<p>").parent().html();h+=j,i&&(i+=j)}html='<dl class="product-addon-totals"><dt>'+woocommerce_addons_params.i18n_addon_total+'</dt><dd><strong><span class="amount">'+h+"</span></strong></dd>",i&&(html=html+"<dt>"+woocommerce_addons_params.i18n_grand_total+'</dt><dd><strong><span class="amount">'+i+"</span></strong></dd>"),html+="</dl>",d.html(html)}else d.empty();a("body").trigger("updated_addons")}),a(this).find(".addon-custom, .addon-custom-textarea, .product-addon input, .product-addon textarea, .product-addon select, input.qty").change(),a(this).find(".variations select").change()},a("body").on("quick-view-displayed",function(){a(this).find(".cart").each(function(){a(this).init_addon_totals()})}),a("body .component").on("wc-composite-component-loaded",function(){a(this).find(".cart").each(function(){a(this).init_addon_totals()})}),a("body").find(".cart").each(function(){a(this).init_addon_totals()})});